<template>
  <div>
    <h3>JavaScript的内存管理和垃圾回收机制</h3>
    <ol>
      <li>
        <h4>分配内存</h4>
        <p>JavaScript在定义变量时就完成了内存分配。</p>
      </li>
      <li>
        <h4>存储方式</h4>
        <p>由于原始值占据空间固定，是简单的数据段，为了便于提升变量查询速度，将其存放在栈(stack)中。</p>
        <p>由于复杂值的大小会改变，所以不能将其存放在栈中，否则会降低变量查询速度，因此将其存储在堆中，存储在变量处的值是一个指针，指向存储对象的内存处。</p>
      </li>
      <li>
        <h4>使用内存</h4>
        <p>使用值的过程实际上是对分配内存进行读取和写入的操作。读取和写入可能是写入一个变量或者一个对象的属性值，甚至传递函数的参数。</p>
      </li>
      <li>
        <h3>释放内存</h3>
        <p>JavaScript内嵌了垃圾回收器，用来跟踪内存的分配和使用，以便当分配的内存不再使用的时候释放它。垃圾回收器会按照固定的时间间隔，或代码执行中预定的收集时间，周期性地执行这一操作。</p>
        <p>局部变量只在函数执行的过程中存在，而在这个过程中，会为局部变量在栈（或者堆）内存中分配相应的空间。在函数执行结束后，这些局部变量就没有存在的必要，就可以释放它们的内存，以便将来使用。在这种情况下，判断变量是否有存在的必要就十分重要了。</p>
        <p>用于标识无用变量的策略通常有标记清除和引用计数两种。</p>
        <ul>
          <li>
            <h5>引用计数</h5>
            <p>
              引用计数是最简单的垃圾收集算法。将对象简化定义为“对象有没有其他对象引用它”，如果没有引用指向该对象，该对象将被垃圾回收机制回收。
            </p>
            <p>
              引用计数有一个限制：无法处理循环引用。
            </p>
          </li>
          <li>
            <h5>标记清除</h5>
            <p>标记清除分为标记和清除两个阶段。在标记阶段，垃圾回收器会从根对象进行遍历，每一个
              可以从根对象访问到的对象都会被添加一个标记，这个对象就被表示为可到达对象。在清除阶段，
              垃圾回收器会对内存进行从头到尾的线性遍历，如果发现对象没有被标记为可到达对象，那么就将此对象
              占用的内存回收，将原来标记为可到达对象的标记清除，以便进行下一次垃圾回收操作。
            </p>
          </li>
        </ul>
      </li>
      <li>
        <h5>优化内存占用</h5>
        <p>优化内存占用的最佳方式：为执行中的代码只保存必要的数据，一旦数据不再有用，最好通过将
          其值设置为null来释放其引用，这种方法叫做解除引用，这一做法适用于大多数全局变量和全局对象的属性，
          局部变量会在它们离开执行环境的时候自动解除引用。
        </p>
        <p>
          解除引用并不意味着回收该值占用的内存，解除引用的真正作用是让值脱离执行环境，以便垃圾回收器在下一次执行的时候回收。
        </p>
      </li>
    </ol>
    <el-backtop/>
  </div>
</template>
<script>
export default {
  name: 'JsRecycling'
}
</script>
